!function(){"use strict";Polymer({is:"main-page",properties:{clothCount:{type:Number,value:14},size:{type:Number,value:6},numColors:{type:Number,value:12},useDmcColors:{type:Boolean,value:!1},hideTheGrid:{type:Boolean,value:!1},imageHash:{type:String,observer:"loadImage"},imageData:{type:Array},gridWidth:{type:Number,computed:"calcGridWidth(clothCount, size)"}},ready:function(){},loadImage:function(){var e=this;void 0!==this.imageHash&&this.imageHash.length>3&&this._getImageDataFromHash(this.imageHash,function(t){e.imageData=t})},calcGridWidth:function(e,t){return e*t},saveImage:function(){this.$.crossStitchElement.saveAsImage()},getImageAsDataURI:function(e){var t=new Image;return t.src=e.getImageAsURI(),t.style["image-rendering"]="pixelated",t.style.display="block",t},openNewTab:function(){var e=this.getImageAsDataURI(this.$.crossStitchElement);e.style.width="100%";var t=this.$.imagePalette.getColorKey();t.style.width="100%";var a=document.createElement("div");a.innerHTML=e.outerHTML+t.outerHTML;var i=window.open("");i.document.write(a.outerHTML)},printImage:function(){var e=this.getImageAsDataURI(this.$.crossStitchElement);e.style.height="auto",e.style.width="auto",e.style.maxHeight="100%",e.style.maxWidth="100%",e.style.marginLeft="auto",e.style.marginRight="auto",e.style.marginTop="0",e.style.marginBottom="0";var t=this.$.imagePalette.getColorKey();t.style.width="100%";var a=document.createElement("div");a.style.width="100%",a.style.height="100%",a.style.margin="0",a.innerHTML=e.outerHTML+t.outerHTML;var i=window.open("");i.document.write(a.outerHTML),i.focus(),i.print()},_getImageDataFromHash:function(e,t){var a="//i.imgur.com/"+e+".jpg",i=new Image;i.crossOrigin="Anonymous",i.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height;var a=e.getContext("2d");a.drawImage(this,0,0),t(a.getImageData(0,0,e.width,e.height))},i.src=a}})}();