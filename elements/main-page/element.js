!function(){"use strict";Polymer({is:"main-page",properties:{clothCount:{type:Number,value:14},size:{type:Number,value:6},numColors:{type:Number,value:12},useDmcColors:{type:Boolean,value:!1},hideTheGrid:{type:Boolean,value:!1},imageHash:{type:String,observer:"loadImage"},imageData:{type:Array},gridWidth:{type:Number,computed:"calcGridWidth(clothCount, size)"},packedOptions:{type:Number,observer:"unpackOptions"}},loadImage:function(){var t=this;void 0!==this.imageHash&&this.imageHash.length>3&&this._getImageDataFromHash(this.imageHash,function(e){t.imageData=e})},unpackOptions:function(){var t=this,e=(this.packedOptions>>>0).toString(2).split("").map(function(t){return!!(1*t)}).reverse();setTimeout(function(){return t.packOptions()},500),this.useDmcColors=e[0],this.hideTheGrid=e[1]},packOptions:function(){var t=[this.useDmcColors,this.hideTheGrid];return parseInt(t.map(function(t){return 1*t}).reverse().join(""),2)},calcGridWidth:function(t,e){return t*e},saveImage:function(){this.$.crossStitchElement.saveAsImage()},getImageAsDataURI:function(t){var e=new Image;return e.src=t.getImageAsURI(),e.style["image-rendering"]="pixelated",e.style.display="block",e},openNewTab:function(){var t=this.getImageAsDataURI(this.$.crossStitchElement);t.style.width="100%";var e=this.$.imagePalette.getColorKey();e.style.width="100%";var i=document.createElement("div");i.innerHTML=t.outerHTML+e.outerHTML;var a=window.open("");a.document.write(i.outerHTML)},printImage:function(){var t=this.getImageAsDataURI(this.$.crossStitchElement);t.style.height="auto",t.style.width="auto",t.style.maxHeight="100%",t.style.maxWidth="100%",t.style.marginLeft="auto",t.style.marginRight="auto",t.style.marginTop="0",t.style.marginBottom="0";var e=this.$.imagePalette.getColorKey();e.style.width="100%";var i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.margin="0",i.innerHTML=t.outerHTML+e.outerHTML;var a=window.open("");a.document.write(i.outerHTML),a.focus(),a.print()},_getImageDataFromHash:function(t,e){var i="//i.imgur.com/"+t+".jpg",a=new Image;a.crossOrigin="Anonymous",a.onload=function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height;var i=t.getContext("2d");i.drawImage(this,0,0),e(i.getImageData(0,0,t.width,t.height))},a.src=i}})}();